# ZTWIM Operator Installation via OLM
# ====================================
# This file installs the ZTWIM operator via OpenShift OLM.
#
# Usage:
#   oc apply -f fixtures/operator-install.yaml
#
# Note: Uses redhat-operators catalog source and stable-v1 channel

---
# 1. Namespace for the operator
apiVersion: v1
kind: Namespace
metadata:
  name: zero-trust-workload-identity-manager
  labels:
    openshift.io/cluster-monitoring: "true"

---
# 2. OperatorGroup
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: zero-trust-workload-identity-manager-og
  namespace: zero-trust-workload-identity-manager
spec:
  upgradeStrategy: Default

---
# 3. Subscription
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: openshift-zero-trust-workload-identity-manager
  namespace: zero-trust-workload-identity-manager
spec:
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  name: openshift-zero-trust-workload-identity-manager
  channel: stable-v1
